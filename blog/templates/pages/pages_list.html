{% extends 'base.html' %}
{% block content %}
<h2>Pages</h2>

<form method="get">
  <input type="text" name="q" value="{{ request.GET.q }}" placeholder="Buscar...">
  <button type="submit">Buscar</button>
</form>

{% if pages %}
  <ul>
  {% for p in pages %}
    <li>
      <strong>{{ p.title }}</strong> — {{ p.subtitle }}
      <a href="{% url 'page_detail' p.pk %}">Leer más</a>

      {% if request.user.is_authenticated %}
        {% if request.user.is_staff or p.author == request.user %}
          · <a href="{% url 'page_update' p.pk %}">Editar</a>
          · <a href="{% url 'page_delete' p.pk %}">Borrar</a>
        {% endif %}
      {% endif %}
    </li>
  {% endfor %}
  </ul>
{% else %}
  <p>No hay páginas aún.</p>
{% endif %}

{% if request.user.is_authenticated %}
  <p><a href="{% url 'page_create' %}">Crear nueva page</a></p>
{% endif %}
{% endblock %}